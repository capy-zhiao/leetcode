# æ€»ç»“

 Python ä¸­å¸¸è§å“ˆå¸Œç»“æ„ï¼ˆ`dict`ã€`set`ã€`Counter`ã€`defaultdict`ï¼‰çš„å¸¸ç”¨æ–¹æ³•å’Œç”¨æ³•æ€»ç»“ğŸ‘‡

------

## âœ… `dict`ï¼ˆå­—å…¸ï¼‰

å­—å…¸æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œkey å¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹ï¼Œvalue ä»»æ„ã€‚

### å¸¸ç”¨æ–¹æ³•ï¼š

| æ–¹æ³•                  | ä½œç”¨              | ç¤ºä¾‹                    |
| --------------------- | ----------------- | ----------------------- |
| `d[key]`              | å–å€¼              | `d['a']`                |
| `d[key] = value`      | æ–°å¢æˆ–ä¿®æ”¹        | `d['a'] = 10`           |
| `d.get(key, default)` | å®‰å…¨å–å€¼          | `d.get('b', 0)`         |
| `d.pop(key)`          | åˆ é™¤å¹¶è¿”å›é”®å€¼    | `d.pop('a')`            |
| `d.keys()`            | è¿”å›æ‰€æœ‰ key      | `for k in d.keys()`     |
| `d.values()`          | è¿”å›æ‰€æœ‰ value    | `for v in d.values()`   |
| `d.items()`           | è¿”å› key-value å¯¹ | `for k, v in d.items()` |
| `key in d`            | åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨ | `'a' in d`              |
| `len(d)`              | è·å–é”®å€¼å¯¹æ•°é‡    | `len(d)`                |

### ç¤ºä¾‹ï¼š

```python
d = {'a': 1, 'b': 2}
d['c'] = 3
print(d.get('d', 0))  # è¾“å‡º 0
for k, v in d.items():
    print(k, v)
```

------

## âœ… `set`ï¼ˆé›†åˆï¼‰

é›†åˆæ˜¯å­˜å‚¨**å”¯ä¸€å…ƒç´ **çš„æ•°æ®ç»“æ„ï¼Œåº•å±‚ä¹Ÿæ˜¯å“ˆå¸Œè¡¨ã€‚

### å¸¸ç”¨æ–¹æ³•ï¼š

| æ–¹æ³•                           | ä½œç”¨                   | ç¤ºä¾‹           |
| ------------------------------ | ---------------------- | -------------- |
| `s.add(x)`                     | æ·»åŠ å…ƒç´                | `s.add(3)`     |
| `s.remove(x)`                  | åˆ é™¤å…ƒç´ ï¼Œä¸å­˜åœ¨æŠ¥é”™   | `s.remove(2)`  |
| `s.discard(x)`                 | åˆ é™¤å…ƒç´ ï¼Œä¸å­˜åœ¨ä¸æŠ¥é”™ | `s.discard(2)` |
| `s.pop()`                      | éšæœºåˆ é™¤å¹¶è¿”å›ä¸€ä¸ªå…ƒç´  | `s.pop()`      |
| `x in s`                       | åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨       | `3 in s`       |
| `len(s)`                       | å…ƒç´ æ•°é‡               | `len(s)`       |
| `s.union(t)` æˆ– `s             | t`                     | å¹¶é›†           |
| `s.intersection(t)` æˆ– `s & t` | äº¤é›†                   | `s & t`        |
| `s.difference(t)` æˆ– `s - t`   | å·®é›†                   | `s - t`        |

### ç¤ºä¾‹ï¼š

```python
s = {1, 2, 3}
s.add(4)
s.discard(2)
print(3 in s)  # True
```

------

## âœ… `collections.Counter`

ç”¨äºç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°ï¼ˆå“ˆå¸Œè®¡æ•°å™¨ï¼‰ã€‚

### å¸¸ç”¨æ–¹æ³•ï¼š

| æ–¹æ³•               | ä½œç”¨                       | ç¤ºä¾‹                       |
| ------------------ | -------------------------- | -------------------------- |
| `Counter(list)`    | ç»Ÿè®¡é¢‘ç‡                   | `Counter(['a', 'b', 'a'])` |
| `c[key]`           | è·å–æŸå…ƒç´ æ¬¡æ•°             | `c['a']`                   |
| `c.most_common(n)` | è¿”å›é¢‘ç‡æœ€é«˜çš„ n ä¸ªå…ƒç´     | `c.most_common(2)`         |
| `c.elements()`     | è¿”å›æ‰€æœ‰å…ƒç´ ï¼ˆæŒ‰æ¬¡æ•°é‡å¤ï¼‰ | `list(c.elements())`       |

### ç¤ºä¾‹ï¼š

```python
from collections import Counter

c = Counter("banana")
print(c)  # Counter({'a': 3, 'n': 2, 'b': 1})
print(c['a'])  # 3
```

------

## âœ… `collections.defaultdict`

å¸¦é»˜è®¤å€¼çš„å­—å…¸ï¼Œé¿å… `KeyError`ã€‚

### å¸¸ç”¨æ–¹æ³•ï¼š

å’Œ `dict` ç±»ä¼¼ï¼Œä½†ä½ éœ€è¦ä¼ å…¥ä¸€ä¸ªé»˜è®¤ç±»å‹ï¼Œå¦‚ `int`, `list`, `set`ã€‚

### ç¤ºä¾‹ï¼š

```python
from collections import defaultdict

d = defaultdict(int)
d['a'] += 1  # è‡ªåŠ¨åˆå§‹åŒ–ä¸º0å†åŠ 1

e = defaultdict(list)
e['nums'].append(5)  # è‡ªåŠ¨åˆå§‹åŒ–ä¸ºç©ºåˆ—è¡¨
```

------

## ğŸ§  å»ºè®®

| ç›®æ ‡                    | æ¨èç»“æ„      |
| ----------------------- | ------------- |
| å­˜é”®å€¼å¯¹                | `dict`        |
| å¿«é€Ÿåˆ¤æ–­æ˜¯å¦å­˜åœ¨        | `set`         |
| ç»Ÿè®¡é¢‘ç‡                | `Counter`     |
| é”®é»˜è®¤å€¼ä¸º list/int/set | `defaultdict` |

------

# easy [242. Valid Anagram](https://leetcode.com/problems/valid-anagram/)

## decription

Given two strings `s` and `t`, return `true` if `t` is an anagram of `s`, and `false` otherwise.

**Example 1:**

**Input:** s = "anagram", t = "nagaram"

**Output:** true

**Example 2:**

**Input:** s = "rat", t = "car"

**Output:** false

## solution

```python
class Solution:
    def isAnagram(self, s: str, t: str) -> bool:
        return Counter(s) == Counter(t)
```

## after

### âœ… 1. åˆ¤æ–­å­—å…¸ A æ˜¯å¦åŒ…å«å­—å…¸ B çš„æ‰€æœ‰é”®å’Œå€¼

æ„æ€æ˜¯ï¼šB çš„æ‰€æœ‰é”®åœ¨ A ä¸­ä¹Ÿæœ‰ï¼Œä¸”å¯¹åº”çš„å€¼ä¸€æ ·ã€‚

#### ç¤ºä¾‹ï¼š

```
python


CopyEdit
a = {'x': 1, 'y': 2, 'z': 3}
b = {'x': 1, 'y': 2}
```

åˆ¤æ–­ï¼š`a` æ˜¯å¦åŒ…å« `b`

#### âœ… æ–¹æ³•ï¼š

```
python


CopyEdit
def dict_contains(a, b):
    return all(k in a and a[k] == v for k, v in b.items())

print(dict_contains(a, b))  # True
```

------

### âœ… 2. Counter` çš„åŒ…å«åˆ¤æ–­ï¼ˆé¢‘ç‡å‹å­—å…¸ï¼‰

```
python


CopyEdit
from collections import Counter

c1 = Counter("banana")
c2 = Counter("ana")

print(c1 >= c2)  # Trueï¼Œæ„æ€æ˜¯ c1 åŒ…å« c2 çš„æ‰€æœ‰å­—ç¬¦è®¡æ•°
```

# easy [1002. Find Common Characters](https://leetcode.com/problems/find-common-characters/)

## decription

Given a string array `words`, return *an array of all characters that show up in all strings within the* `words` *(including duplicates)*. You may return the answer in **any order**.

**Example 1:**

```
Input: words = ["bella","label","roller"]
Output: ["e","l","l"]
```

**Example 2:**

```
Input: words = ["cool","lock","cook"]
Output: ["c","o"]
```

## solution

```python
class Solution:
    def commonChars(self, words: List[str]) -> List[str]:
        
        result = []
        first = Counter(words[0])
        length = len(words)

        if length == 1:
            for k,v in first.items():
                for i in range(v):
                    result.append(k)
        else:
            for word in words[1:]:
                first &= Counter(word)
            for k,v in first.items():
                for i in range(v):
                    result.append(k)
        
        return result
            
```

## after

å†™çš„å¾ˆæ‚,ä¸»è¦æ˜¯å¦‚æœåƒcoolè¿™æ ·,æ¯”å¦‚è¦ç»Ÿè®¡ä¸¤ä¸ªo

<img src="assets/image-20250619115908610.png" alt="image-20250619115908610" width="50%;" />

çœ‹äº†ä¸€ä¸‹åˆ«äººçš„å†™æ³•:

```python
from typing import List

class Solution:
    def commonChars(self, words: List[str]) -> List[str]:
        if len(words) == 1:
            return list(words[0])
        
        res = []
        word1 = set(words[0])
        for char in word1:
            frequency = min([word.count(char) for word in words])
            res += [char] * frequency
        return res
```

# easy [349. Intersection of Two Arrays](https://leetcode.com/problems/intersection-of-two-arrays/)

## decription

Given two integer arrays `nums1` and `nums2`, return *an array of their intersection*. Each element in the result must be **unique** and you may return the result in **any order**.

**Example 1:**

```
Input: nums1 = [1,2,2,1], nums2 = [2,2]
Output: [2]
```

**Example 2:**

```
Input: nums1 = [4,9,5], nums2 = [9,4,9,8,4]
Output: [9,4]
Explanation: [4,9] is also accepted.
```

## solution

```python
class Solution:
    def intersection(self, nums1: List[int], nums2: List[int]) -> List[int]:
        result = []
        common = Counter(nums1)
        for k in common.keys():
            if int(k) in nums2:
                result.append(k)
        return result
```

## after

7ms

<img src="assets/image-20250619123928964.png" alt="image-20250619123928964" width="50%;" />

çœ‹äº†ä¸‹åˆ«äººçš„å†™æ³•:

class Solution:    def intersection(self, nums1: List[int], nums2: List[int]) -> List[int]:        return list(set(nums1).intersection(set(nums2)))        

# easy [202. Happy Number](https://leetcode.com/problems/happy-number/)

## decription

Write an algorithm to determine if a number `n` is happy.

A **happy number** is a number defined by the following process:

- Starting with any positive integer, replace the number by the sum of the squares of its digits.
- Repeat the process until the number equals 1 (where it will stay), or it **loops endlessly in a cycle** which does not include 1.
- Those numbers for which this process **ends in 1** are happy.

Return `true` *if* `n` *is a happy number, and* `false` *if not*.

**Example 1:**

```
Input: n = 19
Output: true
Explanation:
12 + 92 = 82
82 + 22 = 68
62 + 82 = 100
12 + 02 + 02 = 1
```

**Example 2:**

```
Input: n = 2
Output: false
```

## solution

```python
class Solution:
    def sum_squares(self, n: int):
        result = 0
        while n:
            q, v = divmod(n, 10)
            result += v ** 2
            n = q
        return result

    def isHappy(self, n: int) -> bool:
        seen = set()
        while True:
            n = self.sum_squares(n)
            if n == 1:
                return True
            if n in seen:
                return False
            seen.add(n)
```

## after

divmod(126,10) = 12, 6

 å°±æ˜¯åˆ¤æ–­æœ‰æ²¡æœ‰å¾ªç¯

<img src="assets/image-20250623134233407.png" alt="image-20250623134233407" width="40%;" />

# easy [1. Two Sum](https://leetcode.com/problems/two-sum/)

## decription

Given an array of integers `nums` and an integer `target`, return *indices of the two numbers such that they add up to `target`*.

You may assume that each input would have ***exactly\* one solution**, and you may not use the *same* element twice.

You can return the answer in any order.

**Example 1:**

```
Input: nums = [2,7,11,15], target = 9
Output: [0,1]
Explanation: Because nums[0] + nums[1] == 9, we return [0, 1].
```

**Example 2:**

```
Input: nums = [3,2,4], target = 6
Output: [1,2]
```

**Example 3:**

```
Input: nums = [3,3], target = 6
Output: [0,1]
```

## solution

```python
class Solution:
    def twoSum(self, nums: List[int], target: int) -> List[int]:
        length = len(nums)
        # 5
        #0, 1, 2, 3
        for i in range(length-1):
            #i = 3, (4, 5), j = 4
            for j in range(i+1, length):
                tmp = nums[i]+nums[j]
                if tmp == target:
                    return [i,j]
```

## after

  è€—æ—¶æœ‰ç‚¹å¤§,

<img src="assets/image-20250623135012664.png" alt="image-20250623135012664" width="40%;" />

çœ‹äº†æœ€ä¼˜è§£:

for index, num in enumerate(nums): éå†æ•´ä¸ªæ•°ç»„ï¼Œæ‹¿åˆ°å½“å‰çš„ç´¢å¼•å’Œæ•°å€¼ã€‚

Input: nums = [3,2,4], target = 6 Output: [1,2]

```python
class Solution:
    def twoSum(self, nums: List[int], target: int) -> List[int]:
        num_map = {}  # Hash table to store number and its index
        for i, num in enumerate(nums):
            complement = target - num  # Find the complement
            if complement in num_map:
                return [num_map[complement], i]  # Return indices of complement and current number
            num_map[num] = i  # Store the number with its index
```

| å¾ªç¯æ¬¡æ•° | å½“å‰ç´¢å¼• `i` | å½“å‰å€¼ `num` | ç›®æ ‡è¡¥æ•° `complement = target - num` | å½“å‰å“ˆå¸Œè¡¨ `num_map` | è¡¥æ•°æ˜¯å¦å·²åœ¨è¡¨ä¸­ï¼Ÿ | æ“ä½œ          | æ˜¯å¦è¿”å›ç»“æœ |
| -------- | ------------ | ------------ | ------------------------------------ | -------------------- | ------------------ | ------------- | ------------ |
| 1        | 0            | 3            | 3                                    | `{}`                 | âŒ å¦               | å­˜å…¥ `3:0`    | å¦           |
| 2        | 1            | 2            | 4                                    | `{3: 0}`             | âŒ å¦               | å­˜å…¥ `2:1`    | å¦           |
| 3        | 2            | 4            | 2                                    | `{3: 0, 2: 1}`       | âœ… æ˜¯ (`2` åœ¨è¡¨ä¸­)  | è¿”å› `[1, 2]` | âœ… æ˜¯         |

# Med [454. 4Sum II](https://leetcode.com/problems/4sum-ii/)

## decription

Given four integer arrays `nums1`, `nums2`, `nums3`, and `nums4` all of length `n`, return the number of tuples `(i, j, k, l)` such that:

- `0 <= i, j, k, l < n`
- `nums1[i] + nums2[j] + nums3[k] + nums4[l] == 0`

**Example 1:**

```
Input: nums1 = [1,2], nums2 = [-2,-1], nums3 = [-1,2], nums4 = [0,2]
Output: 2
Explanation:
The two tuples are:
1. (0, 0, 0, 1) -> nums1[0] + nums2[0] + nums3[0] + nums4[1] = 1 + (-2) + (-1) + 2 = 0
2. (1, 1, 0, 0) -> nums1[1] + nums2[1] + nums3[0] + nums4[0] = 2 + (-1) + (-1) + 0 = 0
```

**Example 2:**

```
Input: nums1 = [0], nums2 = [0], nums3 = [0], nums4 = [0]
Output: 1
```

## solution

```python
class Solution:
    def fourSumCount(self, nums1: List[int], nums2: List[int], nums3: List[int], nums4: List[int]) -> int:
        length = len(nums1)

        sum_1 = defaultdict(int)
        count = 0

        for i in range(length):
            for j in range(length):
                sum_1[nums1[i]+nums2[j]] += 1

        for k in range(len(nums3)):
            for l in range(len(nums4)):
                sum_2 = nums3[k] + nums4[l]
                count += sum_1[-sum_2] 

        return count
```

## after

count += sum_1[-t]
å¦‚æœ -t ä¸åœ¨ sum_1 é‡Œï¼Œï¼Ÿ
å¦‚æœç”¨çš„æ˜¯ æ™®é€šå­—å…¸ dictï¼Œä¼šæŠ¥é”™ï¼šKeyErrorã€‚

å¦‚æœç”¨çš„æ˜¯ defaultdict(int)ï¼Œå°±ä¸ä¼šæŠ¥é”™ï¼Œä¼šè‡ªåŠ¨è¿”å›é»˜è®¤å€¼ 0ï¼Œæ‰€ä»¥æ˜¯å®‰å…¨çš„.

<img src="assets/image-20250623141348767.png" alt="image-20250623141348767" width="40%;" />

# easy [383. Ransom Note](https://leetcode.com/problems/ransom-note/)

## decription

Given two strings `ransomNote` and `magazine`, return `true` *if* `ransomNote` *can be constructed by using the letters from* `magazine` *and* `false` *otherwise*.

Each letter in `magazine` can only be used once in `ransomNote`.

**Example 1:**

```
Input: ransomNote = "a", magazine = "b"
Output: false
```

**Example 2:**

```
Input: ransomNote = "aa", magazine = "ab"
Output: false
```

**Example 3:**

```
Input: ransomNote = "aa", magazine = "aab"
Output: true
```

## solution

```python

```

## after

  



# Med [15. 3Sum](https://leetcode.com/problems/3sum/)

## decription

Given an integer array nums, return all the triplets `[nums[i], nums[j], nums[k]]` such that `i != j`, `i != k`, and `j != k`, and `nums[i] + nums[j] + nums[k] == 0`.

Notice that the solution set must not contain duplicate triplets.

**Example 1:**

```
Input: nums = [-1,0,1,2,-1,-4]
Output: [[-1,-1,2],[-1,0,1]]
Explanation: 
nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0.
nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0.
nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0.
The distinct triplets are [-1,0,1] and [-1,-1,2].
Notice that the order of the output and the order of the triplets does not matter.
```

**Example 2:**

```
Input: nums = [0,1,1]
Output: []
Explanation: The only possible triplet does not sum up to 0.
```

**Example 3:**

```
Input: nums = [0,0,0]
Output: [[0,0,0]]
Explanation: The only possible triplet sums up to 0.
```

## solution

```python

```

## after

  

# Med [18. 4Sum](https://leetcode.com/problems/4sum/)

## decription

Given an array `nums` of `n` integers, return *an array of all the **unique** quadruplets* `[nums[a], nums[b], nums[c], nums[d]]` such that:

- `0 <= a, b, c, d < n`
- `a`, `b`, `c`, and `d` are **distinct**.
- `nums[a] + nums[b] + nums[c] + nums[d] == target`

You may return the answer in **any order**.

**Example 1:**

```
Input: nums = [1,0,-1,0,-2,2], target = 0
Output: [[-2,-1,1,2],[-2,0,0,2],[-1,0,0,1]]
```

**Example 2:**

```
Input: nums = [2,2,2,2,2], target = 8
Output: [[2,2,2,2]]
```

## solution

```python

```

## after

  
